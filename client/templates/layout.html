<template name="layout">

<body>
	<input id="gmap_search" class="searchbar" type="text" name="gmap_search" placeholder="Nearby Search">
		<i id="gmapbutton" class="zmdi zmdi-search"></i>
  	{{> kwsearchTemplate}}
	<div id="mapBG" class="{{#if showMap}}
			shrink
		{{else}}
			
		{{/if}}">
  	{{> googleMap name="mapPage" options=mapPageMapOptions}}
	</div>
	<main class="{{#if mainOverflow}}
			inArticle
		{{else}}
			inMain
		{{/if}}">
		{{#if mainOverflow}}
		
		{{else}}
			{{> yield}}
		{{/if}}
  </main>
	<div id="toggle_main" class="open">
  	<i id="open_main" class="mainbutton hidden zmdi zmdi-plus-circle zmdi-hc-2x"></i>
  	<i id="close_main" class="mainbutton zmdi zmdi-minus-circle zmdi-hc-2x"></i>
	</div>
	{{> nav}}
	
	{{#if showMap}}{{else}}
	{{> locationBar}}			
	{{/if}}

	{{> footer}}
	{{#if mainOverflow}}
		<article>
			{{> yield "article"}}
		</article>
	{{else}}
		
	{{/if}}
</body>

</template>




<template name="nav">
	<nav id="topBanner">
		<a href="{{pathFor 'home'}}" target="_blank"><div id="b3logo" class="contain-image"></div></a>
		<ul>
			<li><a href="{{pathFor 'home'}}">Home</a></li>
			<li>	{{> loginButtons align="right"}}</li>
		</ul>
	</nav>
</template>

<template name="footer">
	<div id="footer">
		<span><a target="_self" href="{{pathFor 'new'}}">Make a Link</a></span>
		<span><a target="_self" href="{{pathFor 'privacy'}}">Privacy Policy</a></span>
	</div>	
</template>


<template name="mapPage">
	<div id="mapBG">
		<input id="gmap_search" class="searchbar" type="text" name="gmap_search" placeholder="Nearby Search">
		<i id="gmapbutton" class="zmdi zmdi-search"></i>
  	{{> kwsearchTemplate}}
  	{{> googleMap name="mapPage" options=mapPageMapOptions}}
	</div>

</template> 

<template name="kwsearchTemplate">

  {{#if Template.subscriptionsReady}}
  <select id="kw_search"  name="state[]" multiple class="searchbar" placeholder="Keyword Search">
		{{#each listings}}<option value="{{@index}}">{{bizName}}</option>{{/each}}
	</select>
  {{/if}}

</template>



<template name="locationBar">
<div id="gmap_location_pullout">
	<i class="zmdi zmdi-globe zmdi-hc-3x"></i>
	<input type="text" name="location" id="gmap_loc" placeholder="Find Address...">
</div>
</template>